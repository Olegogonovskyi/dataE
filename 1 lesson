# ğŸ›’ Internet Shop Database Architecture

## ğŸ“– Business Logic

Client can:

- ğŸ” Login â†’ creates record in `users`
- ğŸ‘€ View product â†’ creates record in `events`
- ğŸ§º Add to cart / Buy â†’ creates record in `orders` and `events`

---

# ğŸ§© Database Relations

## ğŸ“¦ Orders

- many orders â†’ one user
- many orders â†” many products (via join table)

## ğŸ› Products

- one product â†’ many orders
- one product â†’ many events

## ğŸ‘¤ Users

- one user â†’ many orders
- one user â†’ many events

---

# ğŸ—„ OLTP Database Schema

---

## ğŸ‘¤ USERS

| Field | Type | Description |
|---|---|---|
| id | uuid PK | User identifier |
| name | text | User name |
| email | text | Email address |

---

## ğŸ› PRODUCTS

| Field | Type | Description |
|---|---|---|
| id | uuid PK | Product identifier |
| name | text | Product name |
| price | int | Product price |

---

## ğŸ“¦ ORDERS

| Field | Type | Description |
|---|---|---|
| id | uuid PK | Order identifier |
| sold | boolean | Purchase completed |
| user_id | uuid FK â†’ users.id | Owner |

---

## ğŸ”— ORDER_PRODUCTS (Join Table)

Many-to-many relation between orders and products.

| Field | Type |
|---|---|
| order_id | uuid FK |
| product_id | uuid FK |

---

## ğŸ“Š EVENTS

Tracks user activity.

| Field | Type | Description |
|---|---|---|
| id | uuid PK | Event identifier |
| type | ENUM | sold / seen / inbasket |
| date_created | timestamp | Event timestamp |
| user_id | uuid FK â†’ users.id | User |
| order_id | uuid FK â†’ orders.id | Optional |
| product_id | uuid FK â†’ products.id | Product |

---

# ğŸ“ˆ OLAP Questions

Example analytical queries:

- ğŸ² Random product â€” which users bought it?
- ğŸ‘€ How many users viewed product?
- ğŸ’° How many purchases were made?
- ğŸ‘¤ How many times specific user bought product?

---

# ğŸ§  Architecture Notes

âœ… Events table used as behavioral log (analytics ready)  
âœ… Orders separated from events  
âœ… Many-to-many implemented via join table  
âŒ No array foreign keys (anti-pattern in relational DB)

---

# ğŸš€ Possible Extensions

- order status enum (pending / paid / cancelled)
- product categories
- session tracking
- recommendation engine

